<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ydolm</title>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/Bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/Font-Awesome/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/Admin/Css/style.css">
	<script type="text/javascript" src="__PUBLIC__/Admin/Script/jquery-3.1.0.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/Admin/Bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		function fnPage(){
			var page = $('.pagination div').children();
			var modaly = $('.body .right .modaly');
			modaly.fadeIn();
			$('.pagination div').remove();
			$('.pagination').html(page);
			
			$('.pagination a').click(function(){
				$.get($(this).attr('href'), {index:'0'}, function(data){
					if( data.status ){
						$('.body .right .content').html(data.arr);
						fnPage();
						modaly.fadeOut();
					}
				});
				return false;
			});
			$(page).wrap('<li>');
			$('.pagination .current').removeClass('current').parent().addClass('active');
		}
		
		$(document).ready(function(){
			var modaly = $('.body .right .modaly');
			$('.mtr_nav li').click(function(){
				$('.mtr_nav li').removeClass('action');
				$(this).addClass('action');
				modaly.fadeIn();
				$.get($(this).attr('url'), {index:'0'}, function(data){
					if( data.status ){
						$('.body .right .content').html(data.arr);
						fnPage();
						modaly.fadeOut();
					}
				});
				return false;
			});
		});

		function msg( s, t, m ){
			$('.modal-header .alert[role="alert"]').removeClass(s).addClass(t);
			$('.modal-header .alert[role="alert"]').text(m);
			$('.modal-header .alert[role="alert"]').css('opacity','1');
			setTimeout(function(){
				$('.modal-header .alert[role="alert"]').css('opacity','0');
			},2000);
		}

		function detail( url, val, m ){
			$.get(url, {}, function(data){
				$.each(data.arr, function(n,value){
					$(val[n]).attr( 'placeholder', value );
				});
			});
			return false;
		}

		function fnSubmit( url, val ){
			var oData = {};
			$.each(val, function(n,value){
				if( typeof( value.attr('readonly') ) == 'undefined' ){
					oData[n] = $(value).val();
				}
			});
			oData['id'] = $('#inputID').attr("placeholder");
			$.post(url, oData, function(data){
				if( data.status ){
					msg( 'alert-danger', 'alert-success', data.arr );
					setTimeout(function(){
						$('#myAdmin').fadeOut();
					},1000);
				}else{
					msg( 'alert-success', 'alert-danger', data.arr );
				}
			});
			return false;
		}

	</script>
	<style type="text/css">
		.asc:hover{
			cursor: pointer;
		}
		td:hover{
			color: #428bca;
		}
		li,ol,ul{
			list-style: none;
		}
		.body .left .mtr_nav{
			padding: 10px 0;
			font-family: '微软雅黑';
    		font-size: 15px;
		}
		.mtr_nav li{
			padding: 10px 15px;
			color: aliceblue;
			cursor: pointer;
			transition: background 0.3s;
		}
		.mtr_nav li i{
			display: inline-block;
			width: 25px;
		}
		.mtr_nav a:hover{
			text-decoration: none;
		}
		.mtr_nav li:hover{
			background: #181f27;
		}
		.action{
			background: #181f27;
		}
		.body .right .top p{
			margin-bottom: 0;
			display: inline-block;
		}
		.body .right .top p i{
			margin-right: 5px;
		}
		.body .right .top ul{
			float: right;
			font-size: 18px;
		}
		.body .right .top ul i{
			margin-right: 10px;
		}
		.modaly {
		    position: absolute;
		    width: 88.9%;
		    height: 85.7%;
		    background: rgba(220, 223, 226, 0.8);
		    top: 92px;
		    display: none;
		}
		.modaly p{
			width: 100px;
		    height: 100px;
		    text-align: center;
		    line-height: 100px;
		    font-size: 40px;
		    position: absolute;
		    top: 50%;
		    left: 50%;
		    margin: -50px -50px;
		}
		.pagination{
			float: right;
			padding-right: 50px;
		}
	</style>
</head>
<body>
	<nav class="navbar navbar-default navbar-inverse nav navbar-fiex-top" role="navigation"> 
	    <div class="container-fluid">
		    <div class="navbar-header"> 
		        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#example-navbar-collapse"> 
		            <span class="sr-only">切换导航</span> 
		            <span class="icon-bar"></span> 
		            <span class="icon-bar"></span> 
		            <span class="icon-bar"></span> 
		        </button> 
		        <a class="navbar-brand" href="#">ydolm</a> 
		    </div> 
		    <div class="collapse navbar-collapse navbar-right" id="example-navbar-collapse"> 
		        <ul class="nav navbar-nav"> 
		            <li class="active"><a href="#">网站主页</a></li> 
		            <li><a href="#">内容发布</a></li> 
		            <li><a href="<{:U('Login/logout')}>">注销</a></li> 
		        </ul> 
		    </div> 
	    </div> 
	</nav>
	<div class="body">
		<div class="left">
			<ul class="mtr_nav">
				<li url="<{:U('Index/index')}>"><i class="icon-home"></i>返回首页</li>
				<li url="<{:U('Admins/index')}>"><i class="icon-cog"></i>管理中心</li>
				<li url="<{:U('Users/index')}>"><i class="icon-user"></i>用户管理</li>
				<li><i class="icon-sitemap"></i>商品管理</li>
				<li><i class="icon-tags"></i>订单管理</li>
			</ul>
		</div>
		<div class="right">
			<div class="content">
				
			</div>
			<div class="modaly">
				<p><i class="icon-cog icon-spin"></i></p>
			</div>
		</div>
	</div>

	<!-- 用户信息 -->
	<div class="modal fade" id="myUser" data-remote="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false">
	  	<div class="modal-dialog">
	    	<div class="modal-content">
	      		<div class="modal-header">
	        		<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
	        		<h4 class="modal-title" id="myModalLabel">用户信息</h4>
	      		</div>
	      		<div class="modal-body">
		      	<form class="form-horizontal" role="form">
		      		<div class="form-group">
				    	<label for="inputName" class="col-sm-2 control-label">用户名</label>
				    	<div class="col-sm-10">
				      		<input type="text" readonly class="form-control" id="inputName" placeholder="UserName">
				    	</div>
				  	</div>
				  	<div class="form-group">
				    	<label for="inputEmail" class="col-sm-2 control-label">Email</label>
				    	<div class="col-sm-10">
				      		<input type="email" readonly class="form-control" id="inputEmail" placeholder="1191249254@qq.com">
				    	</div>
				  	</div>
				  	<div class="form-group">
				    	<label for="inputTel" class="col-sm-2 control-label">联系电话</label>
				    	<div class="col-sm-10">
				      		<input type="text" readonly class="form-control" id="inputTel" placeholder="15677793470">
				    	</div>
				  	</div>
				  	<div class="form-group">
				    	<label for="inputTime" class="col-sm-2 control-label">注册时间</label>
				    	<div class="col-sm-10">
				      		<input type="text" readonly class="form-control" id="inputTime" placeholder="2016-6-1 13:30:00">
				    	</div>
				  	</div>
				  	<div class="form-group">
				    	<label for="inputLevel" class="col-sm-2 control-label">等级</label>
				    	<div class="col-sm-10">
				      		<input type="text" readonly class="form-control" id="inputLevel" placeholder="普通用户">
				    	</div>
				  	</div>
				  	<div class="form-group">
				    	<label for="inputStatus" class="col-sm-2 control-label">状态</label>
				    	<div class="col-sm-10">
				      		<input type="text" readonly class="form-control" id="inputStatus" placeholder="正常">
				    	</div>
				  	</div>
				</form>

	      	</div>
	      	<div class="modal-footer">
	        	<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
	      	</div>
	    </div>
	  </div>
	</div>

	<!-- 管理员信息 -->
	<div class="modal fade" id="myAdmin" data-remote="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false">
	  	<div class="modal-dialog">
	  		<form class="form-horizontal" action="<{:U('Admins/edit')}>" role="form" method="post" onsubmit="return fnSubmit( this.action, inputAdmin )">
	    		<div class="modal-content">
		      		<div class="modal-header">
		        		<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
		        		<h4 class="modal-title" id="myModalLabel">管理员信息</h4>
		        		<div class="alert alert-success alert-dismissible text-center" style="opacity: 0;transition: opacity 1s;margin:0;padding: 10px;" role="alert">role="alert"</div>
		      		</div>
	      			<div class="modal-body">
	      				<input type="hidden" readonly class="form-control" id="inputID" placeholder="UserName">
			      		<div class="form-group">
					    	<label for="inputName" class="col-sm-2 control-label">管理员名</label>
					    	<div class="col-sm-10">
					      		<input type="text" class="form-control" id="inputUserName" placeholder="UserName">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputPassword" class="col-sm-2 control-label">原密码</label>
					    	<div class="col-sm-10">
					      		<input type="password" class="form-control" id="inputPassword" placeholder="原密码">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputPasswords" class="col-sm-2 control-label">新密码</label>
					    	<div class="col-sm-10">
					      		<input type="password" class="form-control" id="inputPasswords" placeholder="新密码">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputLast" class="col-sm-2 control-label">登录时间</label>
					    	<div class="col-sm-10">
					      		<input type="text" readonly class="form-control" id="inputLast" placeholder="1191249254@qq.com">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputIP" class="col-sm-2 control-label">登录IP</label>
					    	<div class="col-sm-10">
					      		<input type="text" readonly class="form-control" id="inputIP" placeholder="15677793470">
					    	</div>
					  	</div>
	      			</div>
			      	<div class="modal-footer">
			        	<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			        	<button type="submit" class="btn btn-primary">提交</button>
			      	</div>
	    		</div>
	    	</form>
	  	</div>
	</div>
	
	<!-- 管理员添加 -->
	<div class="modal fade" id="myAdmin-add" data-remote="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false">
	  	<div class="modal-dialog">
	  		<form class="form-horizontal" action="<{:U('Admins/add')}>" role="form" method="post" onsubmit="return fnSubmit( this.action, inputAdmin_add )">
	    		<div class="modal-content">
		      		<div class="modal-header">
		        		<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
		        		<h4 class="modal-title" id="myModalLabel">添加管理员</h4>
		        		<div class="alert alert-success alert-dismissible text-center" style="opacity: 0;transition: opacity 1s;margin:0;padding: 10px;" role="alert">role="alert"</div>
		      		</div>
	      			<div class="modal-body">
			      		<div class="form-group">
					    	<label for="inputName" class="col-sm-2 control-label">管理员名</label>
					    	<div class="col-sm-10">
					      		<input type="text" class="form-control" id="inputNamea" placeholder="UserName">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputPassword" class="col-sm-2 control-label">密码</label>
					    	<div class="col-sm-10">
					      		<input type="password" class="form-control" id="inputPassworda" placeholder="密码">
					    	</div>
					  	</div>
					  	<div class="form-group">
					    	<label for="inputPasswords" class="col-sm-2 control-label">确认密码</label>
					    	<div class="col-sm-10">
					      		<input type="password" class="form-control" id="inputPasswordsa" placeholder="确认密码">
					    	</div>
					  	</div>
	      			</div>
			      	<div class="modal-footer">
			        	<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			        	<button type="submit" class="btn btn-primary">提交</button>
			      	</div>
	    		</div>
	    	</form>
	  	</div>
	</div>
	<script type="text/javascript">
		var inputUser = {
				'name':$('#inputName'),
				'email':$('#inputEmail'),
				'mobile':$('#inputTel'),
				'create_at':$('#inputTime'),
				'level':$('#inputLevel'),
				'status':$('#inputStatus'),
			};
		var inputAdmin = {
				'id':$('#inputID'),
				'name':$('#inputUserName'),
				'password':$('#inputPassword'),
				'passwords':$('#inputPasswords'),
				'last':$('#inputLast'),
				'ip':$('#inputIP'),
			};
		var inputAdmin_add = {
			'name':$('#inputNamea'),
			'password':$('#inputPassworda'),
			'passwords':$('#inputPasswordsa'),
		};
	</script>
</body>
</html>